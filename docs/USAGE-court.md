# Руководство по использованию Court

## Как вынести решение

1. Откройте **/court/judge** (нужно право `social.court.judge`).
2. Выберите форму:
   - **Auto punishment** (автоматический режим) — выберите шаблон, при необходимости добавьте комментарий/идентификатор предыдущего дела и нажмите *Issue auto punishment*.
   - **Manual punishment** (ручной режим) — укажите дельты метрик/монет, длительности бан/мут, смену роли и ссылки на доказательства.
3. Отправьте форму. Сервис проверит лимиты, создаст дело, применит действия и запустит вебхуки.

> Старая форма в админке теперь только для чтения и ведёт на новое рабочее место.

## Как отменить или продлить наказание

- Установите нужную дельту/длительность в `0`, чтобы отменить таймер.
- Создайте следующее дело и укажите идентификатор предыдущего в поле **Continued case**, если требуется продлить существующее наказание.

## Управление шаблонами

1. Откройте **Admin → Social Profile → Court → Templates** (право `social.court.manage_settings`).
2. Редактируйте или создавайте шаблоны (имя, key, исполнитель по умолчанию, JSON-данные).
3. Нажмите **Refresh from config**, чтобы снова импортировать дефолтные значения из `config/court.php`.

## Вебхуки

- Настраиваются в **Admin → Court → Settings → Webhooks**.
- Каждая запись хранит URL, секрет (опция) и список событий (`issued`, `updated`, `reverted`).
- Детали форм, тел запросов и очередей — в [`docs/WEBHOOKS-court.md`](WEBHOOKS-court.md).

## Лимиты и безопасность

- Для судей действуют почасовые и суточные ограничения на количество дел (параметры в настройках).
- Публичный архив требует `social.court.archive`, рабочее место — `social.court.judge`.
- API-токены имеют отдельные scope (описания см. на странице токенов).
